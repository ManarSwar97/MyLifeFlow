{% extends 'base.html' %}
{% load static %}
{% block content %}

<link rel="stylesheet" href="{% static 'css/budgets.css' %}">
<h1 class="page-title">
  Budget Details: <span class="teal-text budget-name">{{ budget.name }}</span>
</h1>

<div class="budget-info card">
  <p><strong>Total Budget:</strong> <span class="budget-value">{{ budget.total_amount }} BHD</span></p>
  <p><strong>Saving Goal:</strong> <span class="budget-value">{{ budget.saving_goal }} BHD</span></p>
  <p><strong>Daily Limit:</strong> <span class="budget-value">{{ budget.daily_limit }} BHD</span></p>
  <p><strong>Duration:</strong> <span class="budget-value">{{ budget.start_date }} to {{ budget.end_date }}</span></p>
  <p>
    <strong>Status:</strong> 
    {% if budget.end_date < today %}
      <span class="status expired">Expired</span>
    {% else %}
      <span class="status active">Active</span>
    {% endif %}
  </p>
  <p><strong>Planned Expenses:</strong> <span class="budget-value">{{ budget.total_planned_expenses }} BHD</span></p>
</div>

<h2 class="section-title">Expenses</h2>

{% if budget.expense_set.all %}
<table class="highlighted-table expenses-table">
  <thead>
    <tr>
      <th>Expense</th>
      <th>Amount (BHD)</th>
      <th>Frequency</th>
    </tr>
  </thead>
  <tbody>
    {% for expense in budget.expense_set.all %}
      <tr>
        <td>{{ expense.name }}</td>
        <td>{{ expense.amount }}</td>
        <td>{{ expense.get_frequency_display }}</td>
      </tr>
    {% endfor %}
  </tbody>
</table>
{% else %}
<p class="no-expenses-msg">No expenses planned yet.</p>
{% endif %}

<div class="actions btn-group">
  <a href="{% url 'budget_update' budget.id %}" class="btn btn-primary">Edit</a>
  <a href="{% url 'budget_delete' budget.id %}" class="btn btn-red">Delete</a>
  <a href="{% url 'budget_list' %}" class="btn btn-grey">Back to Budgets</a>
</div>

{% endblock %}
