{% extends 'base.html' %}
{% load static %}
{% block content %}

<link rel="stylesheet" href="{% static 'css/budgets.css' %}">
<h1 class="center page-title">Budgets</h1>

<div class="btn-group">
  <a href="{% url 'budget_create' %}" class="btn btn-primary">Add Budget</a>
  <a href="{% url 'expense_create' %}" class="btn btn-primary">Add Expense</a>
</div>

<div class="budget-cards">
  {% for budget in budget_list %}
  <div class="budget-card">
    <h3 class="budget-name">{{ budget.name }}</h3>

    <p><strong>Total Budget:</strong> BHD{{ budget.total_amount }}</p>
    <p><strong>Saving Goal:</strong> BHD{{ budget.saving_goal }}</p>
    <p><strong>Planned Expenses:</strong> BHD{{ budget.total_planned_expenses }}</p>
    <p><strong>Daily Limit:</strong> BHD{{ budget.daily_limit }}</p>
    <p><strong>Duration:</strong> {{ budget.start_date }} â†’ {{ budget.end_date }}</p>

    <p>
      <strong>Status:</strong>
      {% if budget.end_date < today %}
      <span class="status expired">Expired</span>
      {% else %}
      <span class="status active">Active</span>
      {% endif %}
    </p>

    <div class="btn-group budget-actions">
      <a href="{% url 'budget_detail' budget.id %}" class="btn btn-teal">View Details</a>
      <a href="{% url 'budget_update' budget.id %}" class="btn btn-orange">Edit</a>
      <a href="{% url 'budget_delete' budget.id %}" class="btn btn-red">Delete</a>
      <a href="{% url 'expense_create' %}?budget_id={{ budget.id }}" class="btn btn-small btn-teal-outline">Add Expense</a>
    </div>
  </div>
  {% empty %}
  <p>No budgets created yet.</p>
  {% endfor %}
</div>
{% endblock %}
