{% extends 'base.html' %}{% block content %}
{% load static %}
<link rel="stylesheet" href="{% static 'css/eb-style.css' %}" />
<link
  rel="stylesheet"
  href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
/>

<div class="table-container">
  <h1>People List</h1>
  <table>
    <thead>
      <tr>
        <th><i class="fa fa-user"></i> Name</th>
        <th><i class="fa fa-envelope"></i> Email</th>
        <th><i class="fa fa-users"></i> Relationship</th>
        <th><i class="fa fa-phone"></i> Phone</th>
        <th><i class="fa fa-calendar-alt"></i> Contact Date</th>
        <th><i class="fa fa-pencil-alt"></i> Notes</th>
        <th><i class="fa fa-cogs"></i> Actions</th>
      </tr>
    </thead>
    <tbody>
      {% for person in person_list %}
      <tr>
        <td>{{ person.name }}</td>
        <td>
          {{ person.email }} {% if person.is_registered_user %}
          <a href="{% url 'send_message' person.id %}" target="_blank"
            >Send Message</a
          >
          {% else %}
          <a
            href="{% url 'send_mail_and_increment' person.id %}"
            target="_blank"
            >Send Mail</a
          >
          {% endif %} >
        </td>
        <td>{{ person.relationship }}</td>
        <td>{{ person.phone_number }}</td>
        <td>{{ person.contact_date }}</td>
        <td>{{ person.notes|truncatechars:50 }}</td>
        <td>
          <a href="{% url 'person_update' person.id %}">Edit</a> |
          <a href="{% url 'person_delete' person.id %}">Delete</a>
        </td>
      </tr>
      {% empty %}
      <tr>
        <td colspan="7">No people found.</td>
      </tr>
      {% endfor %}
    </tbody>
  </table>
  <a href="{% url 'person_create' %}" class="btn">+ Add Person</a>
</div>
{% endblock content %}