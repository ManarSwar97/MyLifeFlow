{% load static %}
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta http-equiv="X-UA-Compatible" content="ie=edge" />
    <title>MyLifeFlow</title>
    
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <link rel="icon" href="{% static 'img/favicon.ico' %}" type="image/x-icon" />

    <link
      href="https://fonts.googleapis.com/icon?family=Material+Icons"
      rel="stylesheet"
    />
  </head>
  
  <body>
  <style>
    body {
      display: flex;
      min-height: 100vh;
      margin: 0;
    }
    .sidebar {
      width: 220px;
      background-color: #db80b1;
      color: white;
      padding-top: 20px;
      flex-shrink: 0;
    }
    .sidebar a {
      color: white;
      display: block;
      padding: 12px 20px;
      text-decoration: none;
    }
    .sidebar a:hover {
      background-color: #37474f;
    }
    main {
      flex-grow: 1;
      padding: 20px;
        }
    .journal-content {
      display: none;
      margin-left: 20px;
    }
  </style>
</head>
<body>

  <div class="sidebar">
    <h5 class="center-align" style="margin-bottom: 30px;">MyLifeFlow</h5>
    <a href="{% url 'home' %}">Dashboard</a>
    <a href="{% url 'task_index' %}">Tasks</a>
    <a href="{% url 'grocery_index' %}">Groceries</a>
    <a href="{% url 'budget_list' %}">Budgets</a>
    <a href="{% url 'item_index' %}">Find My</a>
    <a href="{% url 'person_index' %}">People</a>
    
    <!-- Journal Section -->
  <div class="Journal">
    <a href="#" class="journal-toggle">Journal ▼</a>
    <div class="journal-content">
      <a href="{% url 'note_index' %}">Voice-to-Text</a>
      <a href="{% url 'voice_index' %}">Voice Only</a>
    </div>
  </div>

    <a href="{% url 'achievement_index' %}">Achievements</a>
    {% if user.is_authenticated %}
    <a href="{% url 'about' %}">About</a>
    <div>
    <a href="{% url 'user-profile' %}"><img width="100px" height="100px" style="border-radius: 100px;" src="{{  user.userprofile.profile_image.url }}" alt="Profile Image" /></div></a>
    <form method="post" action="{% url 'logout' %}">
      {% csrf_token %}
      <button type="submit" class="btn red darken-2" style="margin: 10px 20px;">Logout</button>
    </form>
    {% else %}
    <a href="{% url 'login' %}">Sign In</a>
    <a href="{% url 'signup' %}">Sign Up</a>

    </div>
    {% endif %}
  </div>

  <main>
    {% block content %} {% endblock %}
  </main>
  <script>
  document.addEventListener('DOMContentLoaded', function () {
    const toggle = document.querySelector('.journal-toggle')
    const content = document.querySelector('.journal-content')

    // Restore from localStorage
    const isJournalOpen = localStorage.getItem('journalOpen') === 'true'
    if (isJournalOpen) {
      content.style.display = 'block'
      toggle.innerHTML = 'Journal ▲'
    }

    toggle.addEventListener('click', function (e) {
      e.preventDefault()
      const isVisible = content.style.display === 'block'
      content.style.display = isVisible ? 'none' : 'block'
      toggle.innerHTML = !isVisible ? 'Journal ▲' : 'Journal ▼'
      localStorage.setItem('journalOpen', !isVisible);
    })
  })
</script>

  </body>

